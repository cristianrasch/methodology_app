- if list.empty?
  %p= not_found(Project)
- else
  %table.pretty{:border => 0, :cellpadding => 2, :cellspacing => 2, :width => '100%'}
    %thead
      %tr
        %th= sortable('id', 'N°')
        %th= sortable('created_at', 'Fecha')
        %th Projecto
        %th Tipo
        %th Analista
        %th
          %table{:border => 0, :cellpadding => 2, :cellspacing => 2, :width => '100%'}
            %thead
              %tr
                %th{:colspan => 3}= 'Estimación'
              %tr
                %td= sortable('estimated_start_date', 'Inicio')
                %td= sortable('estimated_end_date', 'Fin')
                %td Duración
        %th Etapa
        %th Estado
        %th % Avance
        %th= sortable('envisaged_end_date', 'Fin previsto')
    %tbody
    - list.each do |project|
      %tr
        %td= link_to("##{project.req_nbr}", project, :class => 'underline_none')
        %td= l(project.created_at, :format => :tiny)
        %td= link_to_function(project, "$('##{dom_id(project)}').toggle()")
        %td= project.klass_str.first.upcase
        %td= project.dev.name
        %td
          %table{:border => 0, :cellpadding => 2, :cellspacing => 2, :width => '100%'}
            %thead
              %tr
                %td= l(project.estimated_start_date, :format => :tiny)
                %td= l(project.estimated_end_date, :format => :tiny)
                %td= duration_desc(project, :estimated_duration)
        %td= project.events.first ? project.events.first.stage_str : nil
        %td= project.events.first ? project.events.first.status_str : nil
        %td #{project.compl_perc} %
        %td= l(project.envisaged_end_date, :format => :tiny)
        %td{:style => "background-color: #{indicator_class_for(project)};"}
      = content_tag_for(:tr, project) do
        %td{:colspan => 2}
        %td= project.description
        %td{:colspan => 7}
